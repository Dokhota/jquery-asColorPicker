/*! asColorInput - v0.1.3 - 2014-06-25
* https://github.com/amazingSurge/jquery-asColorInput
* Copyright (c) 2014 amazingSurge; Licensed GPL */
!function(a){a.asColorInput.registerComponent("hue",{size:150,defaults:{direction:"vertical"},data:{},init:function(b,c){var d=this;this.options=a.extend(this.defaults,c),this.direction=this.options.direction,this.$hue=a('<div class="'+b.namespace+"-hue "+b.namespace+"-hue-"+this.direction+'"><i></i></div>').appendTo(b.$dropdown),this.$handle=this.$hue.children("i"),b.$element.on("asColorInput::firstOpen",function(){d.size="vertical"===d.direction?d.$hue.height():d.$hue.width(),d.step=d.size/360,d.update(b),d.bindEvents(b),d.keyboard(b)})},bindEvents:function(b){var c=this;this.$hue.on("mousedown.asColorInput",function(d){var e=d.which?3===d.which:2===d.button;return e?!1:void a.proxy(c.mousedown,c)(b,d)})},mousedown:function(b,c){var d=this.$hue.offset();return"vertical"===this.direction?(this.data.startY=c.pageY,this.data.top=c.pageY-d.top,this.move(b,this.data.top)):(this.data.startX=c.pageX,this.data.left=c.pageX-d.left,this.move(b,this.data.left)),this.mousemove=function(a){var c;return c="vertical"===this.direction?this.data.top+(a.pageY||this.data.startY)-this.data.startY:this.data.left+(a.pageX||this.data.startX)-this.data.startX,this.move(b,c),!1},this.mouseup=function(){return a(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),"vertical"===this.direction?this.data.top=this.data.cach:this.data.left=this.data.cach,!1},a(document).on({mousemove:a.proxy(this.mousemove,this),mouseup:a.proxy(this.mouseup,this)}),!1},move:function(a,b,c,d){b=Math.max(0,Math.min(this.size,b)),this.data.cach=b,"undefined"==typeof c&&(c=360*(1-b/this.size)),c=Math.max(0,Math.min(360,c)),this.$handle.css("vertical"===this.direction?{top:b}:{left:b}),d!==!1&&a.update({h:c},"hue")},moveLeft:function(a){var b=this.step,c=this.data;c.left=Math.max(0,Math.min(this.width,c.left-b)),this.move(a,c.left)},moveRight:function(a){var b=this.step,c=this.data;c.left=Math.max(0,Math.min(this.width,c.left+b)),this.move(a,c.left)},moveUp:function(a){var b=this.step,c=this.data;c.top=Math.max(0,Math.min(this.width,c.top-b)),this.move(a,c.top)},moveDown:function(a){var b=this.step,c=this.data;c.top=Math.max(0,Math.min(this.width,c.top+b)),this.move(a,c.top)},keyboard:function(b){var c,d=this;return b._keyboard?(c=a.extend(!0,{},b._keyboard),void this.$hue.attr("tabindex","0").on("focus",function(){return c.attach("vertical"===this.direction?{up:function(){d.moveUp.call(d,b)},down:function(){d.moveDown.call(d,b)}}:{left:function(){d.moveLeft.call(d,b)},right:function(){d.moveRight.call(d,b)}}),!1}).on("blur",function(){c.detach()})):!1},update:function(a){var b=0===a.color.value.h?0:this.size*(1-a.color.value.h/360);this.move(a,b,a.color.value.h,!1)},destroy:function(){a(document).off({mousemove:this.mousemove,mouseup:this.mouseup})}})}(jQuery);