/*! colorInput - v0.1.3 - 2014-03-19
* https://github.com/amazingSurge/jquery-colorInput
* Copyright (c) 2014 amazingSurge; Licensed GPL */
(function(t){t.colorInput.registerComponent("hAlpha",{width:150,data:{},init:function(e){var i=this,o='<div class="'+e.namespace+'-alpha drag-disable"><i class="drag-disable"></i></div>';this.$alpha=t(o).appendTo(e.$picker),this.$handle=this.$alpha.children("i"),this.$alpha.on("mousedown.colorinput",function(o){var s=o.which?3==o.which:2==o.button;return s?!1:(t.proxy(i.mousedown,i)(e,o),void 0)}),e.$element.on("colorInput::ready",function(){i.width=i.$alpha.width(),i.step=i.width/100,i.update(e),i.keyboard(e)})},mousedown:function(e,i){var o=this.$alpha.offset();return this.data.startX=i.pageX,this.data.left=i.pageX-o.left,this.move(e,this.data.left),e.makeUnselectable(),this.mousemove=function(t){var i=this.data.left+(t.pageX||this.data.startX)-this.data.startX;return this.move(e,i),!1},this.mouseup=function(){return t(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),this.data.left=this.data.cach,e.cancelUnselectable(),!1},t(document).on({mousemove:t.proxy(this.mousemove,this),mouseup:t.proxy(this.mouseup,this)}),!1},move:function(t,e,i,o){e=Math.max(0,Math.min(this.width,e)),this.data.cach=e,i===void 0&&(i=1-e/this.width),i=Math.max(0,Math.min(1,i)),this.$handle.css({left:e}),o!==!1&&t.update({a:Math.round(100*i)/100},"hAlpha")},moveLeft:function(t){var e=this.step,i=this.data;i.left=i.left-e,i.left=Math.max(0,Math.min(this.width,i.left)),this.move(t,i.left)},moveRight:function(t){var e=this.step,i=this.data;i.left=i.left+e,i.left=Math.max(0,Math.min(this.width,i.left)),this.move(t,i.left)},keyboard:function(e){var i,o=this;return e._keyboard?(i=t.extend(!0,{},e._keyboard),this.$alpha.attr("tabindex","0").on("focus",function(){return i.attach({left:function(){o.moveLeft.call(o,e)},right:function(){o.moveRight.call(o,e)}}),!1}).on("blur",function(){i.detach()}),void 0):!1},update:function(t){var e=this.width*(1-t.color.value.a);this.$alpha.css("backgroundColor",t.color.toHEX()),this.move(t,e,t.color.value.a,!1)},destroy:function(){t(document).off({mousemove:this.mousemove,mouseup:this.mouseup})}})})(jQuery);