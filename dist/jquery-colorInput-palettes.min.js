/*! colorInput - v0.1.3 - 2014-03-19
* https://github.com/amazingSurge/jquery-colorInput
* Copyright (c) 2014 amazingSurge; Licensed GPL */
(function(t){t.colorInput.registerComponent("palettes",{height:150,palettes:{defines:[""],colors:["#fff","#000","#000","#ccc"],max:6},init:function(e){var i="<ul>",o=this,a=t.extend(!0,{},this.palettes,e.options.components.palettes);if(this.keyboardBinded=!1,e.options.localStorage){var s="palettes_"+e.id,n=e.getLocalItem(s);n&&(a.colors=n)}t.each(a.colors,function(t,e){i+='<li style="background-color:'+e+'" data-color="'+e+'">'+e+"</li>"}),i+="</ul>",this.$list=t(i),this.$palettes=t('<div class="'+e.namespace+'-palettes"></div>').append(this.$list).appendTo(e.$picker),this.$palettes.delegate("li","click",function(i){var a=t(i.target).data("color");o.$list.find("li").removeClass(""+e.namespace+"-palettes-checked"),t(i.target).addClass(""+e.namespace+"-palettes-checked"),e.set(a),e.close()}),this.$palettes.attr("tabindex","0").on("blur",function(){o.$list.find("li").removeClass(""+e.namespace+"-palettes-checked")}),e.$element.on("colorInput::apply",function(t,e){-1===a.colors.indexOf(e.originalColor)&&(a.colors.length>=a.max&&(a.colors.shift(),o.$list.find("li").eq(0).remove()),a.colors.push(e.originalColor),o.$list.append('<li style="background-color:'+e.originalColor+'" data-color="'+e.originalColor+'">'+e.originalColor+"</li>"),e.options.localStorage&&e.setLocalItem(s,a.colors))}),e.$element.on("colorInput::ready",function(){return o.keyboard(e),!1})},keyboard:function(e){var i,o,a,s=this;return e._keyboard?(i=t.extend(!0,{},e._keyboard),this.$palettes.attr("tabindex","0").on("blur",function(){i.detach(),s.keyboardBinded=!1}),this.$palettes.attr("tabindex","0").on("focus",function(){function t(t){h.removeClass(""+e.namespace+"-palettes-checked"),h.eq(t).addClass("colorInput-palettes-checked")}function n(){return h.index(s.$palettes.find("."+e.namespace+"-palettes-checked"))}if(s.keyboardBinded!==!0){var h=s.$list.find("li");o=-1,a=h.length,i.attach({left:function(){var e=n();-1===e?o-=1:o=e-1,0>o&&(o=a-1),t(o)},right:function(){var e=n();-1===e?o+=1:o=e+1,o>=a&&(o=0),t(o)},RETURN:function(){if(!(0>o)){var t=h.eq(o).data("color");e.set(t),e.close()}}}),s.keyboardBinded=!0}}),void 0):!1}})})(jQuery);