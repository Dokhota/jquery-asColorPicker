/*! colorInput - v0.1.3 - 2014-02-19
* https://github.com/amazingSurge/jquery-colorInput
* Copyright (c) 2014 amazingSurge; Licensed GPL */
$.colorInput.registerComponent("palettes",{selector:".colorInput-palettes",template:'<div class="colorInput-palettes"></div>',height:150,palettes:{defines:[""],colors:["#fff","#000","#000","#ccc"],max:6},init:function(t){var e="<ul>",o=this,i=$.extend(!0,{},this.palettes,t.options.components.palettes);if(this.keyboardBinded=!1,t.options.localStorage){var a="palettes_"+t.id,s=t.getLocalItem(a);s&&(i.colors=s)}$.each(i.colors,function(t,o){e+='<li style="background-color:'+o+'" data-color="'+o+'">'+o+"</li>"}),e+="</ul>",this.$list=$(e),this.$palettes=$(this.template).append(this.$list).appendTo(t.$picker),this.$palettes.delegate("li","click",function(e){var i=$(e.target).data("color");o.$list.find("li").removeClass("colorInput-palettes-checked"),$(e.target).addClass("colorInput-palettes-checked"),t.set(i),t.close()}),this.$palettes.attr("tabindex","0").on("blur",function(){o.$list.find("li").removeClass("colorInput-palettes-checked")}),t.$element.on("colorInput::apply",function(t,e){-1===i.colors.indexOf(e.originalColor)&&(i.colors.length>=i.max&&(i.colors.shift(),o.$list.find("li").eq(0).remove()),i.colors.push(e.originalColor),o.$list.append('<li style="background-color:'+e.originalColor+'" data-color="'+e.originalColor+'">'+e.originalColor+"</li>"),e.options.localStorage&&e.setLocalItem(a,i.colors))}),t.$element.on("colorInput::ready",function(){return o.keyboard(t),!1})},keyboard:function(t){var e,o,i,a=this;return t._keyboard?(e=$.extend(!0,{},t._keyboard),this.$palettes.attr("tabindex","0").on("blur",function(){e.detach(),a.keyboardBinded=!1}),this.$palettes.attr("tabindex","0").on("focus",function(){function s(t){h.removeClass("colorInput-palettes-checked"),h.eq(t).addClass("colorInput-palettes-checked")}function n(){return h.index(a.$palettes.find(".colorInput-palettes-checked"))}if(a.keyboardBinded!==!0){var h=a.$list.find("li");o=-1,i=h.length,e.attach({left:function(){var t=n();-1===t?o-=1:o=t-1,0>o&&(o=i-1),s(o)},right:function(){var t=n();-1===t?o+=1:o=t+1,o>=i&&(o=0),s(o)},RETURN:function(){if(!(0>o)){var e=h.eq(o).data("color");t.set(e),t.close()}}}),a.keyboardBinded=!0}}),void 0):!1}});