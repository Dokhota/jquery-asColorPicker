/*! colorInput - v0.1.3 - 2014-02-19
* https://github.com/amazingSurge/jquery-colorInput
* Copyright (c) 2014 amazingSurge; Licensed GPL */
$.colorInput.registerComponent("alpha",{selector:".colorInput-alpha",template:'<div class="colorInput-alpha drag-disable"><i class="drag-disable"></i></div>',height:150,data:{},init:function(t){var e=this;this.$alpha=$(this.template).appendTo(t.$picker),this.$handle=this.$alpha.children("i"),this.height=this.$alpha.height(),this.$alpha.on("mousedown.colorinput",function(o){var i=o.which?3==o.which:2==o.button;return i?!1:($.proxy(e.mousedown,e)(t,o),void 0)}),t.$element.on("colorInput::ready",function(){e.height=e.$alpha.height(),e.step=e.height/100,e.update(t),e.keyboard(t)})},mousedown:function(t,e){var o=this.$alpha.offset();return this.data.startY=e.pageY,this.data.top=e.pageY-o.top,this.move(t,this.data.top),t.makeUnselectable(),this.mousemove=function(e){var o=this.data.top+(e.pageY||this.data.startY)-this.data.startY;return this.move(t,o),!1},this.mouseup=function(){return $(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),this.data.top=this.data.cach,t.cancelUnselectable(),!1},$(document).on({mousemove:$.proxy(this.mousemove,this),mouseup:$.proxy(this.mouseup,this)}),!1},move:function(t,e,o,i){e=Math.max(0,Math.min(this.height,e)),this.data.cach=e,o===void 0&&(o=1-e/this.height),o=Math.max(0,Math.min(1,o)),this.$handle.css({top:e}),i!==!1&&t.update({a:Math.round(100*o)/100},"alpha")},moveUp:function(t){var e=this.step,o=this.data;o.top=o.top-e,o.top=Math.max(0,Math.min(this.width,o.top)),this.move(t,o.top)},moveDown:function(t){var e=this.step,o=this.data;o.top=o.top+e,o.top=Math.max(0,Math.min(this.width,o.top)),this.move(t,o.top)},keyboard:function(t){var e,o=this;return t._keyboard?(e=$.extend(!0,{},t._keyboard),this.$alpha.attr("tabindex","0").on("focus",function(){return e.attach({up:function(){o.moveUp.call(o,t)},down:function(){o.moveDown.call(o,t)}}),!1}).on("blur",function(){e.detach()}),void 0):!1},update:function(t){var e=this.height*(1-t.color.value.a);this.$alpha.css("backgroundColor",t.color.toHEX()),this.move(t,e,t.color.value.a,!1)},destroy:function(){$(document).off({mousemove:this.mousemove,mouseup:this.mouseup})}});